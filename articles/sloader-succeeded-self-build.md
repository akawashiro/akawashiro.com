# Linux のデフォルトのローダを置き換えるために sloader を開発しています
## ローダとは何か
Linuxで実行可能なバイナリを[execve(2)](https://man7.org/linux/man-pages/man2/execve.2.html)を使って実行するとき、その実行パスは大きく2つに分類されます。
- カーネルが直接、実行可能なバイナリをメモリ空間にロードする
- ローダが実行可能なバイナリをメモリ空間にロードする

`readelf -l` でバイナリの `PT_INTERP` を見ると、そのバイナリがどちらの方法で起動されるかを確認できます。ほとんどの場合、`Requesting program interpreter: /lib64/ld-linux-x86-64.so.2` と書いてあり、これは「ローダが実行可能なバイナリをメモリ空間にロードする」ことを意味します。

```
> readelf -l $(which nvim) | grep INTERP -A 2
  INTERP         0x0000000000000318 0x0000000000000318 0x0000000000000318
                 0x000000000000001c 0x000000000000001c  R      0x1
      [Requesting program interpreter: /lib64/ld-linux-x86-64.so.2]
```

ローダ、`/lib64/ld-linux-x86-64.so.2` はバイナリの起動時に以下のことを行います。
- そのバイナリが必要とする共有ライブラリの検索
- 共有ライブラリとバイナリのメモリ空間へのロード
- 共有ライブラリとバイナリ中のシンボル解決

LD_PRELOADやLD_AUDITなどの環境変数による便利なハックは、これらの環境変数を使ってローダの処理を変更することで実現されています。

## 
Linuxでバイナリを起動するとほとんどの場合ld-linux.soがバイナリファイルをメモリ空間にロードします。